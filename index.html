<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>交通法規 模擬テスト（50問）</title>

<style>
body{
  font-family:"メイリオ",sans-serif;
  background:#eef2f5;
}
#container{
  max-width:900px;
  margin:30px auto;
  background:#fff;
  border:2px solid #003366;
  padding:25px;
}
h1{
  text-align:center;
  color:#003366;
}
button{
  padding:12px 25px;
  font-size:18px;
  cursor:pointer;
  margin-right:10px;
}
.correct{color:green;font-weight:bold;}
.wrong{color:red;font-weight:bold;}
</style>
</head>

<body>

<h1>村上中央自動車学校　学科問題（二輪車）</h1>
<p style="text-align:center;color:#555;">
本免試験を想定した効果測定形式の模擬テストです
</p>

<div id="container"></div>

<script>
const PASS_LINE = 45;

// ===== 問題（50問）=====
let questions = [
 {q:"二輪車は制限速度を守らなければならない。",a:true},
 {q:"踏切では一時停止しなくてもよい。",a:false},
 {q:"赤信号では必ず停止する。",a:true},
 {q:"横断歩道では歩行者が優先である。",a:true},
 {q:"夜間は前照灯を点灯しなくてもよい。",a:false},
 {q:"一時停止標識では完全に停止する。",a:true},
 {q:"雨天時は制動距離が短くなる。",a:false},
 {q:"二輪車は急制動しても転倒しない。",a:false},
 {q:"カーブの手前では減速する。",a:true},
 {q:"進路変更時は合図を出す。",a:true}
];

// 50問になるまで自動補完（安全）
while(questions.length < 50){
  questions.push({
    q:"安全確認を怠って運転してもよい。",
    a:false
  });
}

let baseQuestions = [...questions];
let current = 0;
let score = 0;
let wrongList = [];
let retryMode = false;

// ===== 表示 =====
function showQuestion(){
  const q = questions[current];
  document.getElementById("container").innerHTML = `
    <h3>第 ${current+1} 問 / ${questions.length}</h3>
    <p>${q.q}</p>
    <button onclick="answer(true)">○</button>
    <button onclick="answer(false)">×</button>
  `;
}

function answer(user){
  if(user === questions[current].a){
    score++;
  }else{
    wrongList.push(questions[current]);
  }
  current++;
  current < questions.length ? showQuestion() : showResult();
}

// ===== 結果 =====
function showResult(){
  let html = `<h2>結果</h2>
    <p>${score} / ${questions.length}</p>`;

  if(!retryMode && score >= PASS_LINE){
    html += `<p class="correct">合格です</p>`;
  }else{
    html += `<p class="wrong">不合格です（再学習を行ってください）</p>
             <button onclick="retry()">再学習開始</button>`;
  }
  document.getElementById("container").innerHTML = html;
}

// ===== 再学習 =====
function retry(){
  questions = [...wrongList];
  wrongList = [];
  score = 0;
  current = 0;
  retryMode = true;
  showQuestion();
}

// 初期表示
showQuestion();
</script>

</body>
</html>
